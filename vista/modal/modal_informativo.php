<?php//require_once 'clases/empresa.php';//require_once 'clases/trabajador.php';require_once 'clases/sitio.php';require_once 'clases/vm_sitios.php';//require_once 'clases/pid.php';require_once 'clases/pop.php';class modal_informativo {    public static function sitios($indice, $cod_tp){        if (vm_sitios::traer_sitios_TP($cod_tp)){            $listado_sitios = vm_sitios::traer_sitios_TP($cod_tp);            ?>            <div id="sitios<?php echo $indice; ?>" class="modal fade" aria-hidden="true">                <div class="modal-dialog">                    <div class="modal-content">                        <div class="modal-header">                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                            <h4 class="modal-title">Informacion de sitios involucrados</h4>                        </div>                        <div class="modal-body row">                            <div class="list-group-item-heading col-sm-12">                                <div class="col-sm-2">Nodo</div>                                <div class="col-sm-2">Sitio</div>                                <div class="col-sm-2">Nombre</div>                                <div class="col-sm-2">Direccion</div>                                <div class="col-sm-2">Comuna</div>                                <div class="col-sm-2">Estado</div>                            </div>                            <?php                            foreach($listado_sitios as $resultados_sitios):                                $mi_sitio = sitio::traer_sitio($resultados_sitios["SITE_ID"]);                            ?>                            <div class="list-group-item-info col-sm-12">                                <div class="col-sm-2"><?php echo $mi_sitio->getNodo(); ?></div>                                <div class="col-sm-2"><?php echo $mi_sitio->getSitio(); ?></div>                                <div class="col-sm-2"><?php echo $mi_sitio->getNombre(); ?></div>                                <div class="col-sm-2"><?php echo $mi_sitio->getDireccion(); ?></div>                                <div class="col-sm-2"><?php echo $mi_sitio->getComuna(); ?></div>                                <div class="col-sm-2"><?php echo $mi_sitio->getEstado(); ?></div>                            </div>                            <?php                            endforeach;                            ?>                        </div>                        <div class="modal-footer">                            <button type="button" class="btn btn-white" data-dismiss="modal">Cerrar</button>                        </div>                    </div><!-- modal content -->                </div><!-- modal dialog -->            </div>            <?php        }        else {            //echo 'No hay sitios asociados';        }    }    public static function ver_sitio($cod_region, $comuna, $sigla){        if (vm_grafico_alarmas::traer_alarmas_pop($cod_region,$comuna,$sigla)){            $listado_sitios = vm_grafico_alarmas::traer_alarmas_pop($cod_region,$comuna,$sigla);            $mi_pop = pop::traer_pop($sigla);            ?>            <div id="sitio<?php echo $sigla; ?>" class="modal inmodal fade" tabindex="-1" role="dialog" aria-hidden="true">                <div class="modal-dialog modal-lg">                    <!-- modal content -->                    <div class="modal-content">                        <div class="modal-header">                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                            <h4 class="modal-title">Informaci√≥n de Sitio - Comuna de <?php echo $comuna; ?></h4>                            <h4>Nombre: <?php echo $mi_pop->getNombre(); ?> -  Direccion: <?php echo $mi_pop->getDireccion(); ?> </h4>                        </div>                        <!--modal body -->                        <div class="modal-body-item">                            <div class="list-group-item-heading col-sm-12">                                <div class="col-sm-2"><strong>Sitio</strong></div>                                <div class="col-sm-2"><strong>Tecnologia</strong></div>                                <div class="col-sm-3"><strong>Fecha</strong></div>                                <div class="col-sm-5"><strong>Alarma</strong></div>                            </div>                            <?php                            foreach($listado_sitios as $resultados):                                ?>                                <div class="list-group-item col-sm-12">                                    <div class="ibox within float-e-margins">                                        <div>                                            <div class="col-sm-2"><?php echo $resultados['cod_sitio']; ?></div>                                            <div class="col-sm-2"><?php echo $resultados['tecnologia']; ?></div>                                            <?php                                            if ($resultados['alarma'] == 0){                                                echo '<div class="list-group-item-heading col-sm-8 text-danger">';                                                echo '<div class="col-sm-3">&nbsp;</div>';                                                echo '<div class="col-sm-9">&nbsp;</div>';                                                echo '</div>';                                                }                                            else {                                                $listado_alarmas = vm_grafico_alarmas::traer_alarmas_sitio($cod_region,$comuna,$resultados['cod_sitio']);                                                echo '<div class="list-group-item-heading col-sm-8 text-danger">';                                                foreach ($listado_alarmas as $resultados_alarmas):                                                    echo '<div class="col-sm-3">'.$resultados_alarmas['fecha'].'</div>';                                                    echo '<div class="col-sm-9">'.$resultados_alarmas['alarma'].'</div>';                                                endforeach;                                                echo '</div>';                                            }                                            ?>                                        </div>                                    </div>                                </div>                            <?php                            endforeach;                            ?>                        </div>                        <!-- end modal body -->                        <!-- modal footer -->                        <div class="modal-footer">                            <br>                            <!--div class="btn-group">                                <button data-toggle="dropdown" class="btn btn-default btn-outline btn-sm dropdown-toggle"><i class="fa fa-share-square-o"></i><span class="caret"></span></button>                                <ul class="dropdown-menu">                                    <li><a href="#">Exportar PDF</a></li>                                    <li><a href="#">Exportar Excel</a></li>                                    <li><a href="#">Enviar por email</a></li>                                </ul>                            </div-->                            <div class="btn-group">                                <button type="button" class="btn btn-default btn-outline btn-sm" data-dismiss="modal">Cerrar</button>                            </div>                        </div>                        <!-- end modal footer -->                    </div>                    <!-- end modal content -->                </div><!-- end modal dialog -->            </div>            <?php        }        else {        //echo 'No hay sitios asociados';        }    }}